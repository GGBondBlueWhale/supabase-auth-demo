<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>GSearch Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="app-body">
  <div class="bg-gradient"></div>

  <header class="top-bar glass">
    <div class="logo">GSearch Admin</div>
    <div class="top-bar-right">
      <span id="admin-email" class="user-email"></span>
      <button id="admin-logout-btn" class="ghost-btn">退出</button>
    </div>
  </header>

  <main class="main-container">
    <section class="hero-banner flex-between">
      <div>
        <p class="capsule-label">管理中心</p>
        <h1>生成与追踪 CDKey</h1>
        <p>面向管理员的兑换码管理面板，快速生成、查看最近使用情况。</p>
      </div>
      <div class="status-chip">仅管理员可见</div>
    </section>

    <section class="card glass action-card">
      <div class="flex-between">
        <div>
          <p class="capsule-label">批量生成</p>
          <h2>生成 CDKey</h2>
          <p class="sub-text">设定套餐、天数与数量，一键生成并复制保存。</p>
        </div>
      </div>
      <form id="create-cdkey-form" class="form-inline">
        <input id="plan-input" type="text" placeholder="套餐名，如 pro" value="pro" />
        <input id="days-input" type="number" placeholder="天数，如 30" value="30" />
        <input id="count-input" type="number" placeholder="数量，如 5" value="1" />
        <button type="submit" class="primary-btn">生成</button>
      </form>
      <p class="hint">生成的兑换码仅管理员可见，用户只能拿到你发给他的码。</p>
      <pre id="created-codes" class="codes-output"></pre>
    </section>

    <section class="card glass cdkey-segment">
      <div class="flex-between section-head">
        <div>
          <p class="capsule-label">记录</p>
          <h2>最近生成 / 使用的 CDKey</h2>
          <p class="sub-text">自动按照「未使用」与「已使用」分栏，快速检索与分发。</p>
        </div>
        <div class="status-chips">
          <span class="pill success">未使用：<strong id="unused-count">0</strong></span>
          <span class="pill muted">已使用：<strong id="used-count">0</strong></span>
        </div>
      </div>

      <div class="cdkey-split-grid">
        <div class="sub-card glass">
          <div class="split-head">
            <div>
              <p class="capsule-label success">未使用</p>
              <h3>等待分发的兑换码</h3>
              <p class="sub-text">仅展示最近 50 条数据，优先显示最新生成的未使用兑换码。</p>
            </div>
            <span class="tag">最新</span>
          </div>
          <table id="unused-table" class="cdkey-table">
            <thead>
              <tr>
                <th>Code</th>
                <th>Plan</th>
                <th>Days</th>
                <th>Status</th>
                <th>Used By</th>
                <th>Used At</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="sub-card glass">
          <div class="split-head">
            <div>
              <p class="capsule-label">已使用</p>
              <h3>已经被兑换的记录</h3>
              <p class="sub-text">在这里集中查看已使用兑换码的邮箱与时间，方便追踪。</p>
            </div>
            <span class="tag">追踪</span>
          </div>
          <table id="used-table" class="cdkey-table">
            <thead>
              <tr>
                <th>Code</th>
                <th>Plan</th>
                <th>Days</th>
                <th>Status</th>
                <th>Used By</th>
                <th>Used At</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="admin.js"></script>
</body>
</html>
